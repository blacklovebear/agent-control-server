# - test:
#     name: get test
#     request:
#         url: http://127.0.0.1:9000/config?format=json
#         method: GET
#     validate:
#         - {"check": "body.action", "comparator": "eq", "expect": "GET"}
#         - {"check": "body.message", "comparator": "eq", "expect": "success"}


# - test:
#     name: test Canal server generate config file
#     request:
#         url: http://127.0.0.1:8080/config/canal/server
#         method: POST
#         # headers:
#         #     device_sn: 9TN6O2Bn1vzfybF
#         #     token: F8prvGryC5beBr4g
#         json:
#             zkServers: "172.18.84.224:2181"
#             destinations: "example"
#     validate:
#         - {"check": "body.action", "comparator": "eq", "expect": "POST"}
#         - {"check": "body.message", "comparator": "eq", "expect": "success"}


# - test:
#     name: test Canal instance generate config file
#     request:
#         url: http://127.0.0.1:8080/config/canal/instance
#         method: POST
#         json:
#             instance: 'test'
#             slaveId: 1234
#             masterAddress: "127.0.0.1:3306"
#             dbUsername: "root"
#             dbPassword: "123456"
#             filterRegex: ".*\\\\..*"
#     validate:
#         - {"check": "body.action", "comparator": "eq", "expect": "POST"}
#         - {"check": "body.message", "comparator": "eq", "expect": "success"}


- test:
    name: test TAgent generate config file
    request:
        url: http://127.0.0.1:8080/config/tagent
        method: POST
        json:
            sourceZkServers: 192.168.2.25:2181
            sourceDestination: example
            sinkServers: 192.168.2.25:9092
            sinkTopicHeader: table

    validate:
        - {"check": "body.action", "comparator": "eq", "expect": "POST"}
        - {"check": "body.message", "comparator": "eq", "expect": "success"}